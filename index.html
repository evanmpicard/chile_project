<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Chile Graffiti Project</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
<style>
	body { margin: 0; padding: 0; }
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 






</head>
<body>

<div id="map"></div>

<script>
	$( document ).ready(function() {
		console.log( "ready!" );
	});

	mapboxgl.accessToken = 'pk.eyJ1IjoibWFwZXhwZXJ0IiwiYSI6ImNrZWltZXBmYzFoMHYyc3M1czl6cDEwYzMifQ.5YHvRcXoN_f_BYQBTmvH4w';
	//-70.64, -33.44
    var center_map = [-70.64, -33.44];
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapexpert/ckeivtxov56ye19p53lpn6511',

        center: center_map,
        zoom: 15
    });

    // create the popup
    // var popup = new mapboxgl.Popup({ offset: 25 }).setText(
    //     'Welcome to the Chile Graffiti Project.'
    // );

    // // create DOM element for the marker
    // var el = document.createElement('div');
    // el.id = 'marker';

    // create the marker
    // new mapboxgl.Marker(el)
    //     .setLngLat(center_map)
    //     // .setPopup(popup) // sets a popup on this marker
    //     .addTo(map);



	map.on('click', function(e) {
	  var features = map.queryRenderedFeatures(e.point, {
	    layers: ['image-list'] // replace this with the name of the layer
	  });

	  if (!features.length) {
	    return;
	  }

	  var feature = features[0];

	  var popup = new mapboxgl.Popup({ offset: [1, 1] })
	    .setLngLat(feature.geometry.coordinates)
	    .setHTML('<img src="' + feature.properties.filename + '"style="width:300px;height:300px;">')
	    .addTo(map);
	});




</script>
	<img src onerror="fetch('https://previews.dropbox.com/p/thumb/AA7WiG91iA09WTiNu092T3JRGUi8M4wNcDOCFIUyewDarIX52n_nHCZ5VzSz7zykDwIDWXfMclerLWhyH3YGGhVItKjATiySuCdQXyxBHYPFrqDzv2FfPyDofnl0T1j7nSPo75mysfgAD9jc1jHtXFQ-DJepsO6Rj7OyOqHOstmoXV6w54pqbtD5ZDvqEa13StsZRdqQSt5Knt3Y_40bIrRVesFMLpLip463x1S5Oi1KvTRm5Q9EYM062MeXGY2Vrx_SRDKIimuDIEBRlSula7CsuoKKPbHn2bdyV5Xisk8HjFBNeO5kKtC4bHr6gchNhYBLogcIrcf3N5YUWzcHnz2xv2qKn5Jf0tgogBsQmA6eWHrTvSu_0TArhQkojNBzZFjTjtfF5MTHorqgj3dO12D4zFxB0D49MysjeUcqrc4McgMG08p3aLQd3pes7lalNwY/p.jpeg', {headers: { 'Access-Control-Allow-Headers': 'True', SameSite: 'None'}}).then(r=>r.blob()).then(d=> this.src=window.URL.createObjectURL(d));"" />

</body>
</html>


