<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Chile Graffiti Project</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
<style>
	body { margin: 0; padding: 0; }
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 
<script src="../js/my.js"></script> 





</head>
<body>

<div id="map"></div>

<script>
	$( document ).ready(function() {
		console.log( "ready!" );
	});

	mapboxgl.accessToken = 'pk.eyJ1IjoibWFwZXhwZXJ0IiwiYSI6ImNrZWltZXBmYzFoMHYyc3M1czl6cDEwYzMifQ.5YHvRcXoN_f_BYQBTmvH4w';
	//-70.64, -33.44
    var center_map = [-70.64, -33.44];
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapexpert/ckeivtxov56ye19p53lpn6511',

        center: center_map,
        zoom: 15
    });

    // create the popup
    // var popup = new mapboxgl.Popup({ offset: 25 }).setText(
    //     'Welcome to the Chile Graffiti Project.'
    // );

    // // create DOM element for the marker
    // var el = document.createElement('div');
    // el.id = 'marker';

    // create the marker
    // new mapboxgl.Marker(el)
    //     .setLngLat(center_map)
    //     // .setPopup(popup) // sets a popup on this marker
    //     .addTo(map);



	map.on('click', function(e) {
	  var features = map.queryRenderedFeatures(e.point, {
	    layers: ['image-list'] // replace this with the name of the layer
	  });

	  if (!features.length) {
	    return;
	  }

	  var feature = features[0];

	  var popup = new mapboxgl.Popup({ offset: [1, 1] })
	    .setLngLat(feature.geometry.coordinates)
	    .setHTML('<img src="' + feature.properties.filename + '"style="width:300px;height:300px;">')
		// .setHTML('<img src="http://www.dropbox.com/s/faemjw3vlhv1q9a/img9883.jpg style=width:300px;height:300px;">')
		// .setHTML('<img src onerror="fetch(\'https://www.dropbox.com/s/faemjw3vlhv1q9a/img9883.jpg',{headers: {hello:'World!'}}).then(r=>r.blob()).then(d=> this.src=window.URL.createObjectURL(d));" />')


// <img src="https://www.w3schools.com/images/w3schools_green.jpg" alt="W3Schools.com">
	    .addTo(map);
	});
//https://drive.google.com/file/d/1di1m2PFnMy1u_O_6-FZqj-wEq3jPzAuP/view?usp=sharing
</script>

</body>
</html>


